{"ast":null,"code":"var _jsxFileName = \"/Users/ayoobkhan/Library/CloudStorage/OneDrive-Litmus7SystemsConsultingPvtLtd/Documents/react/new/netflix-gpt-code-only/src/components/SearchComponent.js\",\n  _s = $RefreshSig$();\nimport { useDispatch, useSelector } from \"react-redux\";\nimport lang from \"../utils/langConstant\";\nimport { useRef } from \"react\";\nimport client from \"../utils/openaiConfig\";\nimport { API_Options } from \"../utils/constants\";\nimport { addMovieResult } from \"../utils/searchSlice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SearchComponent = () => {\n  _s();\n  const searchText = useRef();\n  const dispatch = useDispatch();\n  const langVarible = useSelector(store => store.config.selectLang);\n  //   console.log(langVarible);\n\n  const handleSearchTMDB = async movie => {\n    const data = await fetch(\"https://api.themoviedb.org/3/search/movie?query=\" + movie + \"&include_adult=false&language=en-US&page=1\", API_Options);\n    const json = await data.json();\n    return json;\n  };\n\n  //   const handleSearch = async () => {\n  //     // console.log(searchText.current.value);\n  //     const query =\n  //       \"Suggest me 5 movie names based on \" +\n  //       searchText.current.value +\n  //       \". Like example: Avengers, Superman, Spiderman, Batman, Captain America\";\n  //     const response = await client.responses.create({\n  //       model: \"openai/gpt-4o\",\n  //       input: query,\n  //     });\n\n  // const movieArray = response.output_text; //5 movies to array and push this to redux store\n  // console.log(response.output_text);\n  // // dispatch(addMovieName(movieArray));\n  // const promiseArray = movieArray.map((movie) => handleSearchTMDB(movie));\n  // const tmdbResult = await Promise.all(promiseArray);\n  // // dispatch(addMovieResult(tmdbResult));\n\n  const handleSearch = async () => {\n    try {\n      const userInput = searchText.current.value;\n      const query = \"Suggest me a 5 movie names based on \" + userInput + \". I only want 5 movie names no need of description or anything just 5 movies seperated by commas Like example Avengers, Batman, Superman, Spiderman, Loki\";\n      const res = await fetch(\"http://localhost:5000/api/movies\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          query\n        })\n      });\n      const {\n        movieString\n      } = await res.json();\n      console.log(movieString);\n      const cleaned = movieString.replace(/^\\d+\\.\\s*/gm, \"\").trim();\n      const movieArray = cleaned.split(/[\\n,]+/).map(m => m.trim()).filter(Boolean);\n      console.log(movieArray);\n      const promiseArray = movieArray.map(movie => handleSearchTMDB(movie));\n      const tmdbResult = await Promise.all(promiseArray);\n      console.log(tmdbResult);\n      dispatch(addMovieResult({\n        movieName: movieArray,\n        searchResult: tmdbResult\n      }));\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"md:pt-80 pt-60 flex justify-center\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"bg-[rgba(0,0,0,0.5)] md:w-1/2 grid grid-cols-12 rounded-lg w-screen\",\n      onSubmit: e => e.preventDefault(),\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        ref: searchText,\n        type: \"text\",\n        className: \"p-4 m-4 bg-[rgba(0,0,0,0.1)] text-white col-span-9\",\n        placeholder: lang[langVarible].placeholder\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"text-white bg-red-700 rounded-lg col-span-3 py-2 px-4 m-4\",\n        onClick: handleSearch,\n        children: lang[langVarible].search\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n};\n_s(SearchComponent, \"lK5QCJb0NHBXAl1Q0u9Q2nJrZLc=\", false, function () {\n  return [useDispatch, useSelector];\n});\n_c = SearchComponent;\nexport default SearchComponent;\nvar _c;\n$RefreshReg$(_c, \"SearchComponent\");","map":{"version":3,"names":["useDispatch","useSelector","lang","useRef","client","API_Options","addMovieResult","jsxDEV","_jsxDEV","SearchComponent","_s","searchText","dispatch","langVarible","store","config","selectLang","handleSearchTMDB","movie","data","fetch","json","handleSearch","userInput","current","value","query","res","method","headers","body","JSON","stringify","movieString","console","log","cleaned","replace","trim","movieArray","split","map","m","filter","Boolean","promiseArray","tmdbResult","Promise","all","movieName","searchResult","err","error","className","children","onSubmit","e","preventDefault","ref","type","placeholder","fileName","_jsxFileName","lineNumber","columnNumber","onClick","search","_c","$RefreshReg$"],"sources":["/Users/ayoobkhan/Library/CloudStorage/OneDrive-Litmus7SystemsConsultingPvtLtd/Documents/react/new/netflix-gpt-code-only/src/components/SearchComponent.js"],"sourcesContent":["import { useDispatch, useSelector } from \"react-redux\";\r\nimport lang from \"../utils/langConstant\";\r\nimport { useRef } from \"react\";\r\nimport client from \"../utils/openaiConfig\";\r\nimport { API_Options } from \"../utils/constants\";\r\nimport { addMovieResult } from \"../utils/searchSlice\";\r\nconst SearchComponent = () => {\r\n  const searchText = useRef();\r\n  const dispatch = useDispatch();\r\n  const langVarible = useSelector((store) => store.config.selectLang);\r\n  //   console.log(langVarible);\r\n\r\n  const handleSearchTMDB = async (movie) => {\r\n    const data = await fetch(\r\n      \"https://api.themoviedb.org/3/search/movie?query=\" +\r\n        movie +\r\n        \"&include_adult=false&language=en-US&page=1\",\r\n      API_Options\r\n    );\r\n    const json = await data.json();\r\n    return json;\r\n  };\r\n\r\n  //   const handleSearch = async () => {\r\n  //     // console.log(searchText.current.value);\r\n  //     const query =\r\n  //       \"Suggest me 5 movie names based on \" +\r\n  //       searchText.current.value +\r\n  //       \". Like example: Avengers, Superman, Spiderman, Batman, Captain America\";\r\n  //     const response = await client.responses.create({\r\n  //       model: \"openai/gpt-4o\",\r\n  //       input: query,\r\n  //     });\r\n\r\n  // const movieArray = response.output_text; //5 movies to array and push this to redux store\r\n  // console.log(response.output_text);\r\n  // // dispatch(addMovieName(movieArray));\r\n  // const promiseArray = movieArray.map((movie) => handleSearchTMDB(movie));\r\n  // const tmdbResult = await Promise.all(promiseArray);\r\n  // // dispatch(addMovieResult(tmdbResult));\r\n\r\n  const handleSearch = async () => {\r\n    try {\r\n      const userInput = searchText.current.value;\r\n      const query =\r\n        \"Suggest me a 5 movie names based on \" +\r\n        userInput +\r\n        \". I only want 5 movie names no need of description or anything just 5 movies seperated by commas Like example Avengers, Batman, Superman, Spiderman, Loki\";\r\n      const res = await fetch(\"http://localhost:5000/api/movies\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ query }),\r\n      });\r\n      const { movieString } = await res.json();\r\n      console.log(movieString);\r\n      const cleaned = movieString.replace(/^\\d+\\.\\s*/gm, \"\").trim();\r\n      const movieArray = cleaned\r\n        .split(/[\\n,]+/)\r\n        .map((m) => m.trim())\r\n        .filter(Boolean);\r\n      console.log(movieArray);\r\n      const promiseArray = movieArray.map((movie) => handleSearchTMDB(movie));\r\n      const tmdbResult = await Promise.all(promiseArray);\r\n      console.log(tmdbResult);\r\n      dispatch(\r\n        addMovieResult({ movieName: movieArray, searchResult: tmdbResult })\r\n      );\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"md:pt-80 pt-60 flex justify-center\">\r\n      <form\r\n        className=\"bg-[rgba(0,0,0,0.5)] md:w-1/2 grid grid-cols-12 rounded-lg w-screen\"\r\n        onSubmit={(e) => e.preventDefault()}\r\n      >\r\n        <input\r\n          ref={searchText}\r\n          type=\"text\"\r\n          className=\"p-4 m-4 bg-[rgba(0,0,0,0.1)] text-white col-span-9\"\r\n          placeholder={lang[langVarible].placeholder}\r\n        />\r\n        <button\r\n          className=\"text-white bg-red-700 rounded-lg col-span-3 py-2 px-4 m-4\"\r\n          onClick={handleSearch}\r\n        >\r\n          {lang[langVarible].search}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\nexport default SearchComponent;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}